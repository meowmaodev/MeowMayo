package com.mmdev.meowmayo.features.general;

import com.mmdev.meowmayo.utils.events.S02ChatReceivedEvent;
import net.minecraftforge.fml.common.eventhandler.SubscribeEvent;
import net.minecraft.client.Minecraft;

import com.mmdev.meowmayo.config.ConfigSettings;
import com.mmdev.meowmayo.config.settings.ToggleSetting;
import com.mmdev.meowmayo.utils.ChatUtils;
import com.mmdev.meowmayo.utils.PlayerUtils;

public class InvulnerabilityItems {
    private ToggleSetting bMaskA = (ToggleSetting) ConfigSettings.getSetting("Bonzo's Mask Announcement");
    private ToggleSetting bMaskT = (ToggleSetting) ConfigSettings.getSetting("Bonzo's Mask Title");

    private ToggleSetting sMaskA = (ToggleSetting) ConfigSettings.getSetting("Spirit Mask Announcement");
    private ToggleSetting sMaskT = (ToggleSetting) ConfigSettings.getSetting("Spirit Mask Title");

    private ToggleSetting pPetA = (ToggleSetting) ConfigSettings.getSetting("Phoenix Pet Announcement");
    private ToggleSetting pPetT = (ToggleSetting) ConfigSettings.getSetting("Phoenix Pet Title");

    @SubscribeEvent
    public void onChatPacket(S02ChatReceivedEvent event) {
        String msg = event.getMessage();

        if (Minecraft.getMinecraft().thePlayer == null) return;

        if (msg.endsWith("Bonzo's Mask saved your life!") && msg.startsWith("Your")) {
            if (bMaskA.getValue()) ChatUtils.partyChat("Bonzo's Mask Procced!");
            if (bMaskT.getValue()) PlayerUtils.makeTextTitle("Bonzo Popped", 1000);
        }

        if (msg.equals("Your Phoenix Pet saved you from certain death!")) {
            if (pPetA.getValue()) ChatUtils.partyChat("Phoenix Pet Procced!");
            if (pPetT.getValue()) PlayerUtils.makeTextTitle("Phoenix Popped", 1000);
        }

        if (msg.equals("Second Wind Activated! Your Spirit Mask saved your life!")) {
            if (sMaskA.getValue()) ChatUtils.partyChat("Spirit Mask Procced!");
            if (sMaskT.getValue()) PlayerUtils.makeTextTitle("Spirit Popped", 1000);
        }
    }
}